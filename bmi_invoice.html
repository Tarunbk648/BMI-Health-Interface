<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LifeTrack Health Hub - Medical Report Generator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f3f4f6;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: #0F4C81;
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.2em;
            margin-bottom: 5px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            padding: 40px;
        }

        .form-section h2,
        .invoice-section h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.8em;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            color: #333;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 5px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 5px rgba(102, 126, 234, 0.3);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .button-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 30px;
        }

        button {
            padding: 14px 24px;
            font-size: 1em;
            font-weight: 600;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-generate {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-generate:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-send {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .btn-send:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(245, 87, 108, 0.4);
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .invoice-display {
            background: #f9f9f9;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 30px;
            display: none;
            max-height: 600px;
            overflow-y: auto;
        }

        .invoice-display.show {
            display: block;
        }

        .invoice-header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #667eea;
            padding-bottom: 20px;
        }

        .clinic-name {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }

        .invoice-title {
            font-size: 1.5em;
            color: #333;
            font-weight: 600;
        }

        .invoice-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }

        .detail-group {
            background: white;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #667eea;
        }

        .detail-label {
            color: #666;
            font-size: 0.9em;
            font-weight: 600;
            text-transform: uppercase;
        }

        .detail-value {
            color: #333;
            font-size: 1.2em;
            font-weight: bold;
            margin-top: 5px;
        }

        .bmi-display {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 25px;
        }

        .bmi-box {
            background: white;
            padding: 20px;
            border-radius: 5px;
            text-align: center;
            border: 2px solid #e0e0e0;
        }

        .bmi-value {
            font-size: 2.5em;
            font-weight: bold;
            color: #667eea;
        }

        .bmi-category {
            font-size: 1.1em;
            font-weight: 600;
            margin-top: 10px;
            padding: 8px 12px;
            border-radius: 5px;
            display: inline-block;
        }

        .bmi-category.underweight {
            background: #3498db;
            color: white;
        }

        .bmi-category.normal {
            background: #2ecc71;
            color: white;
        }

        .bmi-category.overweight {
            background: #f39c12;
            color: white;
        }

        .bmi-category.obese {
            background: #e74c3c;
            color: white;
        }

        .health-remark {
            background: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #667eea;
            margin-bottom: 20px;
        }

        .health-remark-title {
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
        }

        .health-remark-text {
            color: #555;
            line-height: 1.6;
        }

        .error-message {
            color: #e74c3c;
            font-size: 0.9em;
            margin-top: 5px;
            display: none;
        }

        .error-message.show {
            display: block;
        }

        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            display: none;
        }

        .success-message.show {
            display: block;
        }

        @media (max-width: 768px) {
            .content {
                grid-template-columns: 1fr;
                padding: 20px;
            }

            .header h1 {
                font-size: 1.8em;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .button-group {
                grid-template-columns: 1fr;
            }

            .invoice-details {
                grid-template-columns: 1fr;
            }

            .bmi-display {
                grid-template-columns: 1fr;
            }
        }

        @media print {
            body {
                background: white;
            }

            .container {
                box-shadow: none;
                max-width: 100%;
            }

            .form-section,
            .button-group {
                display: none;
            }

            .invoice-section {
                grid-column: 1 / -1;
            }

            .invoice-display {
                max-height: none;
                border: none;
                padding: 0;
            }
        }

        .hidden-fields {
            display: none;
        }

        /* Hidden form for FormSubmit */
        .formsubmit-form {
            display: none;
        }

        .invoice-footer {
            text-align: center;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
            color: #666;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üè• LifeTrack Health Hub</h1>
            <p>Personal Health & Wellness Report Generator</p>
        </div>

        <!-- Main Content -->
        <div class="content">
            <!-- Form Section -->
            <div class="form-section">
                <h2>Patient Information</h2>
                
                <div class="success-message" id="successMsg"></div>

                <form id="bmiForm">
                    <!-- Patient Name -->
                    <div class="form-group">
                        <label for="patientName">Patient Name <span style="color: red;">*</span></label>
                        <input type="text" id="patientName" placeholder="Enter full name" required>
                        <div class="error-message" id="nameError"></div>
                    </div>

                    <!-- Age -->
                    <div class="form-group">
                        <label for="age">Age <span style="color: red;">*</span></label>
                        <input type="number" id="age" min="1" max="120" placeholder="Enter age" required>
                        <div class="error-message" id="ageError"></div>
                    </div>

                    <!-- Gender -->
                    <div class="form-group">
                        <label for="gender">Gender <span style="color: red;">*</span></label>
                        <select id="gender" required>
                            <option value="">Select Gender</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Other">Other</option>
                        </select>
                        <div class="error-message" id="genderError"></div>
                    </div>

                    <!-- Height and Weight Row -->
                    <div class="form-row">
                        <div class="form-group">
                            <label for="height">Height (cm) <span style="color: red;">*</span></label>
                            <input type="number" id="height" step="0.1" min="50" max="300" placeholder="e.g., 170" required>
                            <div class="error-message" id="heightError"></div>
                        </div>

                        <div class="form-group">
                            <label for="weight">Weight (kg) <span style="color: red;">*</span></label>
                            <input type="number" id="weight" step="0.1" min="20" max="500" placeholder="e.g., 75" required>
                            <div class="error-message" id="weightError"></div>
                        </div>
                    </div>

                    <!-- Email -->
                    <div class="form-group">
                        <label for="email">Email ID (Receiver) <span style="color: red;">*</span></label>
                        <input type="email" id="email" placeholder="your.email@example.com" required>
                        <div class="error-message" id="emailError"></div>
                    </div>

                    <!-- Hidden Fields -->
                    <input type="hidden" id="bmiValue">
                    <input type="hidden" id="bmiCategory">
                    <input type="hidden" id="invoiceNumber">

                    <!-- Buttons -->
                    <div class="button-group">
                        <button type="button" class="btn-generate" onclick="generateInvoice()">
                            üìÑ Generate Invoice
                        </button>
                        <button type="button" class="btn-send" onclick="submitInvoice()" disabled id="sendBtn">
                            ‚úâÔ∏è Send Invoice to Email
                        </button>
                    </div>
                </form>
            </div>

            <!-- Invoice Section -->
            <div class="invoice-section">
                <h2>Generated Invoice</h2>
                <div class="invoice-display" id="invoiceDisplay">
                    <!-- Invoice Header -->
                    <div class="invoice-header">
                        <div class="clinic-name">üè• LifeTrack Health Hub</div>
                        <div class="invoice-title">Medical Health Report</div>
                    </div>

                    <!-- Invoice Details -->
                    <div class="invoice-details">
                        <div class="detail-group">
                            <div class="detail-label">Invoice Number</div>
                            <div class="detail-value" id="invoiceNumberDisplay">-</div>
                        </div>
                        <div class="detail-group">
                            <div class="detail-label">Invoice Date</div>
                            <div class="detail-value" id="invoiceDateDisplay">-</div>
                        </div>
                        <div class="detail-group">
                            <div class="detail-label">Patient Name</div>
                            <div class="detail-value" id="patientNameDisplay">-</div>
                        </div>
                        <div class="detail-group">
                            <div class="detail-label">Age</div>
                            <div class="detail-value" id="ageDisplay">-</div>
                        </div>
                        <div class="detail-group">
                            <div class="detail-label">Gender</div>
                            <div class="detail-value" id="genderDisplay">-</div>
                        </div>
                        <div class="detail-group">
                            <div class="detail-label">Email</div>
                            <div class="detail-value" id="emailDisplay">-</div>
                        </div>
                    </div>

                    <!-- BMI Measurements -->
                    <div class="bmi-display">
                        <div class="bmi-box">
                            <div class="detail-label">Height (cm)</div>
                            <div class="bmi-value" id="heightDisplay">-</div>
                        </div>
                        <div class="bmi-box">
                            <div class="detail-label">Weight (kg)</div>
                            <div class="bmi-value" id="weightDisplay">-</div>
                        </div>
                    </div>

                    <!-- BMI Value and Category -->
                    <div class="bmi-display">
                        <div class="bmi-box">
                            <div class="detail-label">BMI Value</div>
                            <div class="bmi-value" id="bmiValueDisplay">-</div>
                        </div>
                        <div class="bmi-box">
                            <div class="detail-label">BMI Category</div>
                            <div class="bmi-category" id="bmiCategoryDisplay">-</div>
                        </div>
                    </div>

                    <!-- Health Remark -->
                    <div class="health-remark">
                        <div class="health-remark-title">Health Recommendation</div>
                        <div class="health-remark-text" id="healthRemarkDisplay">-</div>
                    </div>

                    <!-- Footer -->
                    <div class="invoice-footer">
                        <p>This invoice is for BMI assessment purposes only. Please consult a healthcare professional for personalized advice.</p>
                        <p style="margin-top: 10px; font-size: 0.8em;">Generated on <span id="invoiceTimeDisplay"></span></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Hidden Form for FormSubmit -->
    <form id="formsubmitForm" class="formsubmit-form" action="https://formsubmit.co/your.email@gmail.com" method="POST">
        <input type="hidden" name="_subject" value="Patient BMI Invoice">
        <input type="hidden" name="_template" value="table">
        <input type="hidden" name="_captcha" value="false">
        <input type="hidden" name="Invoice_Number" id="fs_invoiceNumber">
        <input type="hidden" name="Invoice_Date" id="fs_invoiceDate">
        <input type="hidden" name="Patient_Name" id="fs_patientName">
        <input type="hidden" name="Age" id="fs_age">
        <input type="hidden" name="Gender" id="fs_gender">
        <input type="hidden" name="Email" id="fs_email">
        <input type="hidden" name="Height_cm" id="fs_height">
        <input type="hidden" name="Weight_kg" id="fs_weight">
        <input type="hidden" name="BMI_Value" id="fs_bmiValue">
        <input type="hidden" name="BMI_Category" id="fs_bmiCategory">
        <input type="hidden" name="Health_Remark" id="fs_healthRemark">
        <input type="hidden" name="_next" value="https://yourdomain.com/thank-you.html">
    </form>

    <script>
        // Health remarks based on BMI category
        const healthRemarks = {
            'Underweight': 'Your BMI indicates you are underweight. Consider consulting a healthcare professional for personalized nutrition advice to achieve a healthy weight.',
            'Normal': 'Excellent! Your BMI is within the normal range. Continue maintaining your healthy lifestyle with balanced diet and regular exercise.',
            'Overweight': 'Your BMI indicates you are overweight. Consider increasing physical activity and adopting a balanced diet to reach a healthy weight.',
            'Obese': 'Your BMI indicates obesity. It is highly recommended to consult a healthcare professional for a personalized weight management plan.'
        };

        // Generate a unique invoice number
        function generateInvoiceNumber() {
            const date = new Date();
            const randomNum = Math.floor(Math.random() * 10000);
            return `INV-${date.getFullYear()}${String(date.getMonth() + 1).padStart(2, '0')}${String(date.getDate()).padStart(2, '0')}-${String(randomNum).padStart(4, '0')}`;
        }

        // Calculate BMI
        function calculateBMI(height, weight) {
            const heightInMeters = height / 100;
            return (weight / (heightInMeters * heightInMeters)).toFixed(2);
        }

        // Get BMI category
        function getBMICategory(bmi) {
            bmi = parseFloat(bmi);
            if (bmi < 18.5) return 'Underweight';
            if (bmi < 25) return 'Normal';
            if (bmi < 30) return 'Overweight';
            return 'Obese';
        }

        // Validate form inputs
        function validateForm() {
            let isValid = true;

            // Clear all error messages
            document.querySelectorAll('.error-message').forEach(el => el.classList.remove('show'));

            // Patient Name validation
            const patientName = document.getElementById('patientName').value.trim();
            if (!patientName) {
                showError('nameError', 'Patient name is required');
                isValid = false;
            } else if (patientName.length < 3) {
                showError('nameError', 'Patient name must be at least 3 characters');
                isValid = false;
            }

            // Age validation
            const age = document.getElementById('age').value;
            if (!age) {
                showError('ageError', 'Age is required');
                isValid = false;
            } else if (age < 1 || age > 120) {
                showError('ageError', 'Age must be between 1 and 120');
                isValid = false;
            }

            // Gender validation
            const gender = document.getElementById('gender').value;
            if (!gender) {
                showError('genderError', 'Gender is required');
                isValid = false;
            }

            // Height validation
            const height = document.getElementById('height').value;
            if (!height) {
                showError('heightError', 'Height is required');
                isValid = false;
            } else if (height < 50 || height > 300) {
                showError('heightError', 'Height must be between 50 and 300 cm');
                isValid = false;
            }

            // Weight validation
            const weight = document.getElementById('weight').value;
            if (!weight) {
                showError('weightError', 'Weight is required');
                isValid = false;
            } else if (weight < 20 || weight > 500) {
                showError('weightError', 'Weight must be between 20 and 500 kg');
                isValid = false;
            }

            // Email validation
            const email = document.getElementById('email').value.trim();
            const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!email) {
                showError('emailError', 'Email is required');
                isValid = false;
            } else if (!emailPattern.test(email)) {
                showError('emailError', 'Invalid email format');
                isValid = false;
            }

            return isValid;
        }

        // Show error message
        function showError(elementId, message) {
            const errorElement = document.getElementById(elementId);
            errorElement.textContent = message;
            errorElement.classList.add('show');
        }

        // Generate Invoice
        function generateInvoice() {
            // Validate form
            if (!validateForm()) {
                return;
            }

            // Get form values
            const patientName = document.getElementById('patientName').value.trim();
            const age = document.getElementById('age').value;
            const gender = document.getElementById('gender').value;
            const height = parseFloat(document.getElementById('height').value);
            const weight = parseFloat(document.getElementById('weight').value);
            const email = document.getElementById('email').value.trim();

            // Calculate BMI
            const bmi = calculateBMI(height, weight);
            const bmiCategory = getBMICategory(bmi);
            const invoiceNumber = generateInvoiceNumber();
            const invoiceDate = new Date().toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            const invoiceTime = new Date().toLocaleString('en-US');

            // Update hidden fields
            document.getElementById('bmiValue').value = bmi;
            document.getElementById('bmiCategory').value = bmiCategory;
            document.getElementById('invoiceNumber').value = invoiceNumber;

            // Update invoice display
            document.getElementById('invoiceNumberDisplay').textContent = invoiceNumber;
            document.getElementById('invoiceDateDisplay').textContent = invoiceDate;
            document.getElementById('patientNameDisplay').textContent = patientName;
            document.getElementById('ageDisplay').textContent = age;
            document.getElementById('genderDisplay').textContent = gender;
            document.getElementById('emailDisplay').textContent = email;
            document.getElementById('heightDisplay').textContent = height;
            document.getElementById('weightDisplay').textContent = weight;
            document.getElementById('bmiValueDisplay').textContent = bmi;
            document.getElementById('invoiceTimeDisplay').textContent = invoiceTime;

            // Update BMI category with styling
            const categoryDisplay = document.getElementById('bmiCategoryDisplay');
            categoryDisplay.textContent = bmiCategory;
            categoryDisplay.className = 'bmi-category ' + bmiCategory.toLowerCase();

            // Update health remark
            document.getElementById('healthRemarkDisplay').textContent = healthRemarks[bmiCategory];

            // Populate FormSubmit hidden fields
            document.getElementById('fs_invoiceNumber').value = invoiceNumber;
            document.getElementById('fs_invoiceDate').value = invoiceDate;
            document.getElementById('fs_patientName').value = patientName;
            document.getElementById('fs_age').value = age;
            document.getElementById('fs_gender').value = gender;
            document.getElementById('fs_email').value = email;
            document.getElementById('fs_height').value = height;
            document.getElementById('fs_weight').value = weight;
            document.getElementById('fs_bmiValue').value = bmi;
            document.getElementById('fs_bmiCategory').value = bmiCategory;
            document.getElementById('fs_healthRemark').value = healthRemarks[bmiCategory];

            // Show invoice
            document.getElementById('invoiceDisplay').classList.add('show');

            // Enable send button
            document.getElementById('sendBtn').disabled = false;

            // Show success message
            const successMsg = document.getElementById('successMsg');
            successMsg.textContent = '‚úÖ Invoice generated successfully! You can now send it via email.';
            successMsg.classList.add('show');
        }

        // Submit invoice via FormSubmit
        function submitInvoice() {
            const email = document.getElementById('email').value.trim();
            
            if (!email) {
                alert('Please generate invoice first');
                return;
            }

            // Update FormSubmit action with user's email
            const form = document.getElementById('formsubmitForm');
            form.action = `https://formsubmit.co/${email}`;

            // Submit the form
            form.submit();

            // Show confirmation
            alert('Invoice submitted! You will receive it at ' + email);
        }

        // Allow Enter key to generate invoice
        document.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && e.target.tagName !== 'TEXTAREA') {
                e.preventDefault();
                generateInvoice();
            }
        });

        // Clear success message when user starts editing
        document.querySelectorAll('#bmiForm input, #bmiForm select').forEach(el => {
            el.addEventListener('change', () => {
                document.getElementById('successMsg').classList.remove('show');
            });
        });
    </script>
</body>
</html>
